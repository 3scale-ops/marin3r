resources:
- manifests.yaml
- service.yaml
- deployment.yaml

configurations:
- kustomizeconfig.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
images:
- name: controller
  newName: quay.io/3scale/marin3r
  newTag: v0.8.0-alpha.15

patchesStrategicMerge:
- |-
  apiVersion: admissionregistration.k8s.io/v1
  kind: MutatingWebhookConfiguration
  metadata:
    name: mutating-webhook-configuration
  webhooks:
    - name: sidecar-injector.marin3r.3scale.net
      reinvocationPolicy: Never
      matchPolicy: Equivalent
      objectSelector:
        matchLabels:
          marin3r.3scale.net/status: enabled
